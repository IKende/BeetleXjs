var _6a0bf5f6e5cf4c0a92daf593246d8f0b = '<el-form :size="size" :label-width="labelwidth+\'px\'" :model="data" ref="customForm"><el-row><el-col v-if="col1.length>0" :span="parseInt(22/column)"><div class="grid-content bg-purple"><auto-property v-for="item in col1" v-model="item.value" :item="item" @valuechange="valueChange"></auto-property></div></el-col><el-col v-if="col2.length>0" :span="parseInt(22/column)"><div class="grid-content bg-purple"><auto-property v-for="item in col2" v-model="item.value" :item="item" @valuechange="valueChange"></auto-property></div></el-col><el-col v-if="col3.length>0" :span="parseInt(22/column)"><div class="grid-content bg-purple"><auto-property v-for="item in col3" v-model="item.value" :item="item" @valuechange="valueChange"></auto-property></div></el-col><el-col v-if="col4.length>0" :span="parseInt(22/column)"><div class="grid-content bg-purple"><auto-property v-for="item in col4" v-model="item.value" :item="item" @valuechange="valueChange"></auto-property></div></el-col><el-col v-if="col5.length>0" :span="parseInt(22/column)"><div class="grid-content bg-purple"><auto-property v-for="item in col5" v-model="item.value" :item="item" @valuechange="valueChange"></auto-property></div></el-col></el-row>'; Vue.component("auto-form", { props: ["info", "value", "size", "url"], data() { return { col1: [], col2: [], col3: [], col4: [], col5: [], data: { items: [] }, model: this.value, column: this.info && this.info.col ? this.info.col : 1, labelwidth: this.info && this.info.labelwidth ? this.info.labelwidth : 120, dataUrl: this.url } }, model: { prop: "value", event: "change" }, methods: { init(e) { this.data.items = [], this.col1 = [], this.col2 = [], this.col3 = [], this.col4 = [], this.col5 = []; var l = [this.col1, this.col2, this.col3, this.col4, this.col5]; for (this.column > 5 && (this.column = 5), i = 0; i < e.length; i++)"checkbox" != e[i].type || e[i].value || (e[i].value = []), e[i].index = i, this.data.items.push(e[i]), l[i % this.column].push(e[i]); this.$refs.customForm.clearValidate() }, valueChange() { this.$emit("change", this.getData()), this.init(this.data.items), this.$refs.customForm.validate(e => { }) }, validate() { var e = null; return this.$refs.customForm.validate(l => { e = l }), e }, getData() { var e = new Object; for (i = 0; i < this.data.items.length; i++)this.getProperty(e, this.data.items[i]); return e }, setData(e) { if (e) for (i = 0; i < this.data.items.length; i++)this.setProperty(e, this.data.items[i]) }, setProperty(e, l) { if (l.parent) { var t = e[l.parent]; "checkbox" != l.type || t && t[l.name] ? t && t[l.name] && (l.value = t[l.name]) : l.value = [] } else "checkbox" != l.type || e[l.name] ? e[l.name] && (l.value = e[l.name]) : l.value = []; l.setValue && l.setValue(l.value) }, getProperty(e, l) { l.parent ? (e[l.parent] || (e[l.parent] = new Object), e[l.parent][l.name] = l.value) : e[l.name] = l.value }, loadData(e) { if (e && beetlex) { var l = new beetlexAction("/__apidoc/GetApiDetail"); l.requested = (e => { this.column = e.col, this.labelwidth = e.labelwidth, this.init(e.items) }), l.get({ url: e }) } } }, mounted() { this.info && this.init(this.info.items), this.setData(this.model), this.loadData(this.dataUrl) }, watch: { info(e) { this.column = e.col, e.labelwidth ? this.labelwidth = e.labelwidth : this.labelwidth = 120, this.column || (this.column = 1), this.init(e.items), this.setData(this.model) }, value(e) { this.model = e, this.setData(this.model) }, url(e) { this.dataUrl = e, this.loadData(this.dataUrl) } }, template: _6a0bf5f6e5cf4c0a92daf593246d8f0b }); var _e11fba23877543aca0be0be914e5bd02 = '<div><el-form-item v-if="info.type==\'number\'" :label="info.label?info.label:info.name" :prop="\'items.\'+info.index+\'.value\'" :rules="rules"><el-input-number v-model="model.value" :min="-9999999" :max="9999999" style="width: 100%;" @change="updateValue"></el-input-number></el-form-item><el-form-item v-else-if="info.type==\'date\'" :label="info.label?info.label:info.name" :prop="\'items.\'+info.index+\'.value\'" :rules="rules"><el-date-picker v-model="model.value"align="left"type="date" style="width: 100%;" @change="updateValue"></el-date-picker></el-form-item><el-form-item v-else-if="info.type==\'time\'" :label="info.label?info.label:info.name" :prop="\'items.\'+info.index+\'.value\'" :rules="rules"><el-time-picker v-model="model.value" style="width: 100%;" @change="updateValue"></el-time-picker></el-form-item><el-form-item v-else-if="info.type==\'select\'" :label="info.label?info.label:info.name" :prop="\'items.\'+info.index+\'.value\'" :rules="rules"><el-select v-model="model.value" style="width: 100%;" @change="updateValue"><el-option v-if="item.data">无选择</el-option><el-option v-if="item.data" v-for="sitem in info.data" :label="sitem.label?sitem.label:sitem.value" :value="sitem.value"></el-option></el-select></el-form-item><el-form-item v-else-if="info.type==\'radio\'" :label="info.label?info.label:info.name" :prop="\'items.\'+info.index+\'.value\'" :rules="rules"><el-radio-group v-model="model.value" @change="updateValue"><el-radio v-if="info.data" v-for="sitem in info.data" :label="sitem.value">{{sitem.label?sitem.label:sitem.value}}</el-radio></el-radio-group></el-form-item><el-form-item v-else-if="info.type==\'checkbox\'" :label="info.label?info.label:info.namel" :prop="\'items.\'+info.index+\'.value\'" :rules="rules"><el-checkbox-group v-model="model.value" @change="updateValue"><el-checkbox v-if="info.data" v-for="sitem in info.data" :label="sitem.value">{{sitem.label?sitem.label:sitem.value}}</el-checkbox></el-checkbox-group></el-form-item><el-form-item v-else-if="info.type==\'switch\'" :label="info.label?info.label:info.name" :prop="\'items.\'+info.index+\'.value\'" :rules="rules"><el-switch v-model="model.value" @change="updateValue"></el-switch></el-form-item><el-form-item v-else-if="info.type==\'password\'" :label="info.label?info.label:info.name" :prop="\'items.\'+info.index+\'.value\'" :rules="rules"><el-input v-model="model.value" show-password @change="updateValue"></el-input></el-form-item><el-form-item v-else-if="info.type==\'remark\'" :label="info.label?info.label:info.name" :prop="\'items.\'+info.index+\'.value\'" :rules="rules"><el-input v-model="model.value" type="textarea" @change="updateValue" :row="info.row?info.row:3"></el-input></el-form-item><el-form-item v-else :label="info.label?info.label:info.name" :prop="\'items.\'+info.index+\'.value\'" :rules="rules"><el-input v-model="model.value" @change="updateValue"></el-input></el-form-item>'; Vue.component("auto-property", { props: ["item", "value"], model: { prop: "value", event: "change" }, data() { return { model: { value: this.value }, info: this.item, rules: [] } }, methods: { updateValue() { this.$emit("change", this.model.value), this.$emit("valuechange") }, loadData() { if (this.info.dataurl) { var e = new beetlexAction(this.info.dataurl); e.requested = (e => { this.info.data = e }), e.get() } }, setValue(e) { this.model.value = e } }, mounted() { this.loadData(), this.info.rules && (this.rules = this.info.rules), this.info.setValue = this.setValue }, watch: { item(e) { this.info = e, this.model.value = e.value, this.info.rules && (this.rules = this.info.rules), this.loadData(), this.info.setValue = this.setValue } }, template: _e11fba23877543aca0be0be914e5bd02 });